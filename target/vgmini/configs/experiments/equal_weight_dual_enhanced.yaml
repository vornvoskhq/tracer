name: equal_weight_dual_enhanced
description: Enhanced equal-weight model with market structure features to solve identical scores

# Core experiment settings
buy_threshold: 0.02
sell_threshold: 0.02  
forecast_horizon: 5
confidence_threshold: 0.3

# Required by YAML loader - using defaults like equal_weight_dual
universe:
  symbols: [SPY, QQQ, DIA, IWM]  # Use same symbols as global defaults

dates:
  start: "2023-01-01"
  end: "2024-01-01"

features:
  enabled:
    # Current 8 core features (keep these)
    - price_above_ema9
    - price_above_ema30
    - ema9_above_ema30
    - macd_above_signal
    - macd_above_zero
    - signal_above_zero
    - macd_positive_hist
    - ha_uptrend
    
    # NEW: Market Structure Features (maximum diversity)
    # These solve the identical scores problem by providing context
    - above_resistance         # Price broke above recent swing high
    - higher_highs_higher_lows # Clean uptrend structure
    - breakout_confirmed       # Fresh breakout with volume
    - clean_uptrend           # Combined uptrend + EMA alignment
    - volume_confirmed_move   # Move confirmed by volume

model:
  type: equal_weight
  buy_threshold: 0.02
  sell_threshold: 0.02
  forecast_horizon: 5
  ew_correlation_signs: false     # Disable to allow weight variation
  ew_calibrate_prior: true        # Enable prior calibration for better scores
  ew_activation_threshold: 0.0
  ew_temperature: 0.2             # Very low temp = maximum score variance
  ew_buy_aggregation: fraction
  ew_sell_aggregation: fraction

backtest:
  confidence_threshold: 0.3    # Lower threshold for equal_weight model
  hysteresis_margin: 0.05      # Optional: reduce signal noise